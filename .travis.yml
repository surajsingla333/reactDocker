sudo: required
services:
    - docker

before_install:
    - docker build -t surajsingla333/docker-react -f Dockerfile.dev .

script:
    - docker run surajsingla333/docker-react npm run test -- --coverage

deploy:
    provider: heroku
    api_key: $HEROKU_API
    app: dockerreact
    on:
        repo: surajsingla333/reactDocker
        branch: master

deploy:
    provider: azure_web_apps
    username: $AZURE_USERNAME
    password: $AZURE_PASSWORD
    site: https://reactdockerapp.azurewebsites.net/
    on:
        repo: surajsingla333/reactDocker
        branch: azure

# AWS as in tutorial
# deploy:
#     provider: elasticbeanstalk
#     region: "us-west-2" # region where we created
#     app: "dockerReact" # name of the app on elastic
#     env: "Docker-env" # docker environment
#     bucket_name: "elasticbeanstalk" #zip file to be called on elastic
#     bucket_path: "dockerReact" # same as app
#     on:
#         branch: master

    
    
